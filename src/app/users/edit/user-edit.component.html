<mat-progress-bar *ngIf="loading" mode="indeterminate" style="position: absolute"></mat-progress-bar>
<mat-toolbar color='accent'>
    <h1 color='primary'>Users</h1>
    <span style="flex: 1 1 auto"></span>
    <a href="/users/new"><button mat-icon-button matTooltip="Create User" (click)="$event.preventDefault(); openNew();">
            <mat-icon>add</mat-icon>
        </button></a>
    <button *ngIf="isEdit" mat-icon-button matTooltip="Delete User" (click)="delete()" color="warn">
        <mat-icon>delete</mat-icon>
    </button>
</mat-toolbar>
<div class="container-page">
    <mat-card>
        <mat-card-content>
            <div class="row side-padding">
                <div class="col-sm-6">
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Username" [(ngModel)]="user.username">
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="First Name" [(ngModel)]="user.firstname">
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Last Name" [(ngModel)]="user.lastname">
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Middle Name" [(ngModel)]="user.middlename">
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Email" [(ngModel)]="user.email">
                        </mat-form-field>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div *ngIf="!isEdit" class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Password" type="password" [(ngModel)]="user.password">
                        </mat-form-field>
                    </div>
                    <div *ngIf="!isEdit" class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Password Confirm" type="password" [(ngModel)]="passwordConfirm">
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <mat-label>Status</mat-label>
                            <mat-select [(ngModel)]="user.status">
                                <mat-option *ngFor="let status of userService.statuses" [value]="status.id">
                                    {{status.label}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <mat-label>Trade</mat-label>
                            <mat-select [(ngModel)]="user.trade">
                                <mat-option *ngFor="let trade of userService.trades" [value]="trade.id">
                                    {{trade.label}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="row form-group side-padding">
                        <mat-form-field>
                            <input matInput placeholder="Phone" [(ngModel)]="user.phone">
                        </mat-form-field>
                    </div>
                    <div *ngIf="isEdit" class="row form-group side-padding">
                        <mat-accordion>
                            <user-labor-charges-portal [(user)]="user"></user-labor-charges-portal>
                            <user-tickets-portal [(user)]="user" (open)="openTicket($event)"></user-tickets-portal>
                        </mat-accordion>
                    </div>
                </div>
            </div>
            <div class="row side-padding">
                <div class="col-sm-12">
                    <div class="row form-group side-padding">
                        <button mat-flat-button color='primary' style="margin-right: 15px"
                            (click)="save()">Save</button>
                        <button mat-flat-button color='accent' (click)="close()">Close</button>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>